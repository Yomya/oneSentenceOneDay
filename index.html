<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/mdui/0.4.1/css/mdui.min.css">
<script src="https://cdnjs.loli.net/ajax/libs/mdui/0.4.1/js/mdui.min.js"></script>
  <link rel="stylesheet" href="css/main.css">
  <title>OneDayOneSentence for Miss snow</title>
</head>
<body class="mdui-bottom-nav-fixed">
  <img class="rounded" src="img/top.jpg" alt="">
  <div class="container">
    <div class="card">
      <div class="card-body">
        <h2 id="hitokoto">:D 获取中...</h2>
        <div class="quoteS"><span>——</span><font id="from">:D 获取中...</font></div>
      </div>
    </div>
  </div>
<button type="button" class="btn mdui-btn-primary">Primary</button>
  <h1 >每日段子</h1>
  <div id="joke"></div>
  <div id="city"></div>
  <div id="weather"></div>
  <div id="temp"></div>
<!-- 底部导航栏 -->
    <div class="mdui-bottom-nav mdui-bottom-nav-scroll-hide mdui-bottom-nav-text-auto mdui-color-white">
    <a href="javascript:;" class="mdui-ripple mdui-bottom-nav-active">
      <i class="mdui-icon material-icons">history</i>
      <label>Recents</label>
    </a>
    <a href="javascript:;" class="mdui-ripple">
      <i class="mdui-icon material-icons">favorite</i>
      <label>Favorites</label>
    </a>
    <a href="javascript:;" class="mdui-ripple">
      <i class="mdui-icon material-icons">location_on</i>
      <label>Nearby</label>
    </a>
  </div>
  <!-- 接口获取脚本 -->
  <script>
    fetch('https://v1.hitokoto.cn')
      .then(function (res){
        return res.json();
      })
      .then(function (data) {
        var hitokoto = document.getElementById('hitokoto');
        var from = document.getElementById('from');
        hitokoto.innerText = data.hitokoto;
        from.innerText = data.from;
      })
      .catch(function (err) {
        console.error(err);
      })
      // 详情查看 https://hitokoto.cn/api
      // 笑话
      fetch('https://api.isoyu.com/index.php/api/joke/index?page=10')
        .then(function (res){
          return res.json();
        })
        .then(function (data) {
          var joke = document.getElementById('joke');
          for(var d in data.data){
            var p=document.createElement("p");
              p.id="spanid";
              p.style.color="gray";
              b=parseInt(parseInt(d)+1);
              p.innerHTML= '<p>'+b+'. '+data.data[d].digest+'</p>'+'<div class="quoteS">'+'——'+data.data[d].source+'</div>';
              joke.appendChild(p);
          }

        })
        .catch(function (err) {
          console.error(err);
        })
        // 天气
        var weatherArr={
    "10": "暴雨",
    "11": "大暴雨",
    "12": "特大暴雨",
    "13": "阵雪",
    "14": "小雪",
    "15": "中雪",
    "16": "大雪",
    "17": "暴雪",
    "18": "雾",
    "19": "冻雨",
    "20": "沙尘暴",
    "21": "小到中雨",
    "22": "中到大雨",
    "23": "大到暴雨",
    "24": "暴雨到大暴雨",
    "25": "大暴雨到特大暴雨",
    "26": "小到中雪",
    "27": "中到大雪",
    "28": "大到暴雪",
    "29": "浮尘",
    "30": "扬沙",
    "31": "强沙尘暴",
    "53": "霾",
    "99": "",
    "00": "晴",
    "01": "多云",
    "02": "阴",
    "03": "阵雨",
    "04": "雷阵雨",
    "05": "雷阵雨伴有冰雹",
    "06": "雨夹雪",
    "07": "小雨",
    "08": "中雨",
    "09": "大雨"
};
        fetch(' http://mobile.weather.com.cn/data/forecast/101200101.html?_=1381891660081')
          .then(function (res){
            return res.json();
          })
          .then(function (data) {
            var city = document.getElementById('city');
            var weather = document.getElementById('weather');
            var temp = document.getElementById('temp');
            city.innerText = data.c.c5;
            weather.innerText = weatherArr[data.f.f1[0].fa]+weatherArr[data.f.f1[0].fb];
            temp.innerText = data.f.f1[0].fd+'℃~'+data.f.f1[0].fc+'℃';
          })
          .catch(function (err) {
            console.error(err);
          })
  </script>
</body>
</html>
